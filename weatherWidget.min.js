!function(e){"use strict";jQuery.support.cors=!0,e.fn.weatherWidget=function(t){t=e.extend({zipCode:""},t);var r={apiURL:"http://query.yahooapis.com/v1/public/yql?q=select%20item%20from%20weather.forecast%20where%20location%3D%22{{zipCode}}%22&format=json",loadingTemplate:'<div class="weather-widget-loading">Loading...</div>',errorTemplate:'<div class="weather-widget-error"><strong>Error:</strong><br/>{{errorMessage}}</div>',htmlTemplate:'<div class="weather-widget-title">{{title}}</div>                           <div class="weather-widget-current-conditions">                               <div class="weather-widget-current-temp">{{currentTemp}}&deg;</div>                               <div class="weather-widget-current-image-container">                                   <div class="weather-widget-current-image"><img src="{{imageURL}}" /></div>                                   <div class="weather-widget-current-image-text">{{imageText}}</div>                               </div>                           </div>                           <div class="weather-widget-forecast">                               {{forecastItems}}                           </div>',forecastItemTemplate:'<div class="weather-widget-forecast-item">                                       <div class="weather-widget-forecast-day">{{forecastDay}}</div>                                       <div class="weather-widget-forecast-temp">{{forecastHigh}}&deg; / {{forecastLow}}&deg;</div>                                   </div>'},a=function(t,a){var s=e(a);s.addClass("weather-widget"),s.html(r.loadingTemplate),i(s)},i=function(a){e.ajax({type:"GET",url:r.apiURL.replace("{{zipCode}}",t.zipCode),dataType:"json",success:function(e){if(e.query&&e.query.count>0&&e.query.results&&e.query.results.channel){var t=e.query.results.channel.item;t&&t.forecast&&5==t.forecast.length?s(a,t):t&&t.title?s(a,!1,t.title):s(a,!1,"Weather information was not found.")}else s(a,!1,"Weather information was not found.")},error:function(){s(a,!1)}})},s=function(e,t,a){var i="";if(t===!1)a=a?a:"Weather data could not be loaded.",i=r.errorTemplate.replace("{{errorMessage}}",a);else{console.log(t);var s=t.title;s=s.substring(s.indexOf("Conditions for")+15,s.indexOf(" at "));var o=t.description,c=o.match(/src\s*=\s*"(.+?)"/i);o=c&&c.length>1?c[1]:"";for(var d="",n=0;n<t.forecast.length;n++){var l=t.forecast[n];d+=r.forecastItemTemplate.replace("{{forecastDay}}",l.day).replace("{{forecastHigh}}",l.high).replace("{{forecastLow}}",l.low)}i=r.htmlTemplate.replace("{{title}}",s).replace("{{currentTemp}}",t.condition.temp).replace("{{imageURL}}",o).replace("{{imageText}}",t.condition.text).replace("{{forecastItems}}",d)}e.html(i)};return this.each(a)}}(jQuery);